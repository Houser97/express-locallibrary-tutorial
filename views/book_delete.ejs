<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet", href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css", integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z", crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js", integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj", crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js", integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV", crossorigin="anonymous"></script>

    <script></script>
  </head>
  <body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-2">
                <ul class="sidebar-nav">
                    <li>
                        <a href="/catalog">Home</a>
                    </li>
                    <li>
                        <a href="/catalog/books">All books</a>
                    </li>
                    <li>
                        <a href="/catalog/authors">All authors</a>
                    </li>
                    <li>
                        <a href="/catalog/genres">All genres</a>
                    </li>
                    <li>
                        <a href="/catalog/bookinstances">All book-instances</a>
                    </li>
                    <li>
                       <hr>
                    </li>
                    <li>
                        <a href="/catalog/author/create">Create new author</a>
                    </li>
                    <li>
                        <a href="/catalog/genre/create">Create new genre</a>
                    </li>
                    <li>
                        <a href="/catalog/book/create">Create new book</a>
                    </li>
                    <li>
                        <a href="/catalog/bookinstance/create">Create new book instance (copy)</a>
                    </li> 
                </ul>
            </div>
            <div class="col-sm-10">
                <h1><%= title %>: <%= book.title %> </h1>
                <p><strong>Author: 
                    <a href= <%= book.author.url %> ></strong><%= book.author.name %></a>
                </p>
                <p><strong>Summary: </strong><%= book.summary%></p>
                <p><strong>Genre: </strong><% if(book.genre.length) { %>
                    <% book.genre.forEach(genre => { %>
                        <span>
                            <%= genre.name %>
                        </span>
                    <% }) %>
                <% } else { %>
                    No genre was specified for this book.
                <% } %>
                </p>

                <% if(book_instances.length) { %>
                    <p><strong>Delete the following books instances before attempting to delete this book.</strong></p>
                    <div style="margin-left: 20px; margin-top: 20px">
                        <h4>Book Instances</h4>
                        <dl>
                            <% book_instances.forEach(book_instance => { %>
                                <dt>
                                    <strong>Id:</strong> <a href=<%= book_instance.url %>> <%= book_instance.id %> </a>
                                </dt>
                            <% }) %>
                        </dl>
                    </div>
                <% } else { %>
                    <p>Do you really want to delete this Book?</p>
                    <form action="" method="POST">
                        <input class="form-control" type="hidden" name="bookid" required value=<%= book._id %>>
                        <button class="btn btn-primary">Delete</button>
                        
                    </form>
                <% } %>
            </div>
        </div>
    </div>
  </body>
</html>